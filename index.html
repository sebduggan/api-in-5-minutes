<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>A REST API in 5 minutes with Preside</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/moon.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/atom.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<style>
			.reveal section img {
				border: 0;
			}
			.space-above {
				margin-top:1em;
			}
		</style>
	</head>
	<body>


		<div class="reveal">
			<div class="slides">

				<section data-background-image="img/puffin.jpg" data-transition="fade-out">
					<h2 style="text-transform: none; color:#002b36;">A REST API in 5 minutes with Preside</h2>
				</section>

				<section></section>

				<section>
					<h2>Quick Start</h2>
				</section>

				<section>
					TODO: Brief overview of the demo site
				</section>

				<section>
					<video data-src="video/install.mov" />
				</section>

				<section>
					<em>/preside-objects/dog.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers>
/**
 * @dataManagerEnabled  true
 */


component {
  property name="name" type="string" dbtype="varchar";
  property ...
}</code></pre>
				</section>
				<section>
					<em>/preside-objects/dog.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers="3">
/**
 * @dataManagerEnabled  true
 * @dataApiEnabled      true
 */

component {
  property name="name" type="string" dbtype="varchar";
  property ...
}</code></pre>
				</section>

				<section>
					<video data-src="video/user-config-1.mov" />
				</section>
				<section>
					<video data-src="video/user-config-2.mov" />
				</section>

				<section>
					<h2>Auto-generated docs</h2>
					<p><u>/api/data/v1/docs/html/</u></p>

					<aside class="notes">
						Open API (Swagger) spec
					</aside>
				</section>

				<section>
					<img data-src="img/docs-basic-1.png" />
				</section>
				<section>
					<img data-src="img/docs-basic-2.png" />
				</section>
				<section>
					<img data-src="img/docs-basic-3.png" />
				</section>
				<section>
					<img data-src="img/docs-basic-4.png" />
				</section>
				<section>
					<img data-src="img/docs-basic-5.png" />
				</section>
				<section>
					<img data-src="img/docs-basic-6.png" />
				</section>
				<section>
					<img data-src="img/docs-basic-7.png" />
				</section>

				<section>
					<p>GET <u>/entity/dog/</u></p>
				</section>
				<section>
					<video data-src="video/i-dog-listing-auth.mov" />
				</section>
				<section>
					<video data-src="video/i-dog-fields.mov" />
				</section>
				<section>
					<video data-src="video/i-dog-filter.mov" />
				</section>
				<section>
					<video data-src="video/i-dog-pagesize.mov" />
				</section>

				<section>
					<p>GET <u>/entity/dog/{recordId}/</u></p>
				</section>
				<section>
					<video data-src="video/i-dog-jethro.mov" />
				</section>

				<section>
					<p>PUT <u>/entity/dog/{recordId}/</u></p>
				</section>
				<section>
					<video data-src="video/i-dog-jethro-put.mov" />
				</section>


				<section>
					<h2>A pragmatic approach to REST</h2>
				</section>

				<section>
					<ul>
						<li>
							The Preside Data API uses these verbs:
							<ul>
								<li class="fragment">GET</li>
								<li class="fragment">POST</li>
								<li class="fragment">PUT</li>
								<li class="fragment">DELETE</li>
							</ul>
						</li>

						<li class="fragment space-above">
							PATCH is <em>not</em> used:
							<ul>
								<li class="fragment">all updates use PUT</li>
								<li class="fragment">only supplied fields are updated</li>
							</ul>
						</li>
					</ul>
				</section>

				<section>
					<p>HATEOAS<small class="fragment" data-fragment-index="1">*</small>? No thank you...</p>
					<ul>
						<li class="fragment" data-fragment-index="2">Response body contains <em>only</em> the data</li>
						<li class="fragment" data-fragment-index="3">Metadata is passed in the headers</li>
						<li class="fragment" data-fragment-index="4">API is documented separately</li>
					</ul>

					<small class="fragment" data-fragment-index="1"><br><br><br><br>* <u>H</u>ypertext <u>a</u>s <u>t</u>he <u>E</u>ngine <u>o</u>f <u>A</u>pplication <u>S</u>tate</small>

					<aside class="notes">
						Hypertext As The Engine Of Application State
					</aside>
				</section>



				<section>
					<h2>Simple customisation</h2>
				</section>

				<section>
					<em>/base/api_entity.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers>
/**
 * @dataApiEnabled             true
 * @dataApiExcludeFields       _version_is_draft, <span style="opacity:0.3;">&crarr;</span>
       _version_has_drafts
 * @dataApiUpsertExcludeFields _version_is_draft, <span style="opacity:0.3;">&crarr;</span>
       _version_has_drafts,datemodified,datecreated
 */

component {}</code></pre>
				</section>
				<section>
					<em>/base/api_entity.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers="2">
/**
 * @dataApiEnabled             true
 * @dataApiExcludeFields       _version_is_draft, <span style="opacity:0.3;">&crarr;</span>
       _version_has_drafts
 * @dataApiUpsertExcludeFields _version_is_draft, <span style="opacity:0.3;">&crarr;</span>
       _version_has_drafts,datemodified,datecreated
 */

component {}</code></pre>
				</section>
				<section>
					<em>/base/api_entity.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers="3-4">
/**
 * @dataApiEnabled             true
 * @dataApiExcludeFields       _version_is_draft, <span style="opacity:0.3;">&crarr;</span>
       _version_has_drafts
 * @dataApiUpsertExcludeFields _version_is_draft, <span style="opacity:0.3;">&crarr;</span>
       _version_has_drafts,datemodified,datecreated
 */

component {}</code></pre>
				</section>
				<section>
					<em>/base/api_entity.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers="5-6">
/**
 * @dataApiEnabled             true
 * @dataApiExcludeFields       _version_is_draft, <span style="opacity:0.3;">&crarr;</span>
       _version_has_drafts
 * @dataApiUpsertExcludeFields _version_is_draft, <span style="opacity:0.3;">&crarr;</span>
       _version_has_drafts,datemodified,datecreated
 */

component {}</code></pre>
				</section>

				<section>
					<em>/preside-objects/dog.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers>
/**
 * @dataManagerEnabled  true
 * @dataApiEnabled      true
 */


component {
  property name="name" type="string" dbtype="varchar";
  property ...
}</code></pre>
				</section>
				<section>
					<em>/preside-objects/dog.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers>
/**
 * @dataManagerEnabled  true
 */



component {
  property name="name" type="string" dbtype="varchar";
  property ...
}</code></pre>
				</section>
				<section>
					<em>/preside-objects/dog.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers="7">
/**
 * @dataManagerEnabled  true
 */



component extends="app.base.api_entity" {
  property name="name" type="string" dbtype="varchar";
  property ...
}</code></pre>
				</section>
				<section>
					<em>/preside-objects/dog.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers="3">
/**
 * @dataManagerEnabled  true
 * @dataApiEntityName   dogs
 */


component extends="app.base.api_entity" {
  property name="name" type="string" dbtype="varchar";
  property ...
}</code></pre>
				</section>
				<section>
					<em>/preside-objects/dog.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers="4">
/**
 * @dataManagerEnabled  true
 * @dataApiEntityName   dogs
 * @dataApiCategory     core
 */

component extends="app.base.api_entity" {
  property name="name" type="string" dbtype="varchar";
  property ...
}</code></pre>
				</section>

				<section>
					<em>/preside-objects/breed.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers>
/**
 * @dataManagerGroup   dogs
 * @dataApiCategory    lookups
 * @dataApiEntityName  breeds
 */


component extends="app.base.api_entity" {}</code></pre>
				</section>
				<section>
					<em>/preside-objects/breed.cfc</em>
					<pre><code class="java" data-trim data-noescape data-line-numbers="5">
/**
 * @dataManagerGroup   dogs
 * @dataApiCategory    lookups
 * @dataApiEntityName  breeds
 * @dataApiVerbs       GET,POST
 */

component extends="app.base.api_entity" {}</code></pre>
				</section>

				<section>
					<video data-src="video/docs-customised.mov">
				</section>


				<section>
					<h2>Customising the Docs</h2>
				</section>

				<section>
					<em>/i18n/dataapi.properties</em>
					<pre><code style="white-space: pre-wrap;" data-trim data-noescape>
api.title=Rescue Remedies API
api.description=This API provides REST access to the data for the Rescue Remedies dog rehoming website.
api.version=v1.0
api.favicon=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAGVGlUWH...
					</code></pre>
				</section>

				<section>
					<img data-src="img/docs-i18n.png">
				</section>


				<section>
					<h2>Further reading</h2>
					<ul>
						<li class="fragment">
							Preside Data API extension docs<br>
							<u>https://github.com/pixl8/preside-ext-data-api</u>
						</li>
						<li class="fragment space-above">
							<em>REST Assured: A Pragmatic Approach To API Design</em><br>
							Adam Tuttle (author of Taffy)<br>
							<u>https://restassuredbook.com/</u>
						</li>
						<li class="fragment space-above">
							<em>Build APIs You Won't Hate</em><br>
							Phil Sturgeon<br>
							<u>https://apisyouwonthate.com/</u>
						</li>
					</ul>
				</section>

				<section>
					<h2>Contact me</h2>
					<ul>
						<li class="fragment">
							Twitter: <u>@sebduggan</u>
						</li>
						<li class="fragment space-above">
							Slack: <u>https://www.preside.org/slack</u>
						</li>
					</ul>
				</section>
			</div>
		</div>



		<script src="js/reveal.js"></script>
		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true }
				],
				controls: false,
				autoPlayMedia: true,
				progress: true,
				transition: "none"
			});
		</script>
	</body>
</html>
